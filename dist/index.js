!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PostMessageHandler=t():e.PostMessageHandler=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null!==e)try{return t in e}catch(n){return void 0!==e[t]}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=function(e){return"function"===r.default(e)||"function"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.prototype.toString.call(e).substring(8).toLowerCase();return t.substring(0,t.length-1)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(5),s=n(2),o=n(1),u=n(6),a=function(){function e(e,t,n){if(this.messageListener=[],this.listenerRegistered=!1,this.isWindow=t.self===t&&t.window===t&&"object"==typeof window.document,this.isWindow&&"string"!==s.default(n))throw new Error("`target` is `window` like which requires an `targetOrigin`, but no `targetOrigin` is set");this.targetOrigin=n,this.secret=e,this.target=t,this.eventCallback=i.default(this.handleMessage,this)}return e.registerListener=function(e){r.default(window,"message",e,!1)},e.removeListener=function(e){u.default(window,"message",e)},e.prototype.subscribe=function(t){var n=this;return this.listenerRegistered||(this.listenerRegistered=!0,e.registerListener(this.eventCallback)),o.default(t)&&this.messageListener.push(t),function(){n.unsubscribe(t)}},e.prototype.unsubscribe=function(t){var n=this.messageListener.indexOf(t);n>-1&&this.messageListener.splice(n,1),this.messageListener.length<=0&&(e.removeListener(this.eventCallback),this.listenerRegistered=!1)},e.prototype.send=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(o.default(this.target.postMessage))try{return this.isWindow?(this.target.postMessage(this.secret+JSON.stringify(e),this.targetOrigin),!0):(this.target.postMessage(this.secret+JSON.stringify(e)),!0)}catch(e){}return!1},e.prototype.checkEventOrigin=function(e,t){return e===this.targetOrigin&&t===this.target},e.prototype.handleMessage=function(e){var t=e.message?"message":"data",n="string"===s.default(e[t])?e[t].slice(0,this.secret.length):"",r="string"===s.default(e[t])?e[t].slice(this.secret.length):"";this.checkEventOrigin(e.origin,e.source)&&n===this.secret&&this.callListener(JSON.parse(r))},e.prototype.callListener=function(e){for(var t=this.messageListener.length,n=-1;++n<t;)this.messageListener[n].apply(void 0,e)},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t,n,i){r.default(e,"addEventListener")?e.addEventListener(t,n,i):r.default(e,"attachEvent")&&e.attachEvent("on"+t,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return r.default(e)?r.default(Function.prototype.bind)?Function.prototype.bind.apply(e,[t].concat(n)):n.length>0?function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length>0?e.apply(t,n.concat(r)):e.apply(t,n)}:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length>0?e.apply(t,n):e.call(t)}:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default=function(e,t,n){r.default(e,"removeEventListener")?e.removeEventListener(t,n):r.default(e,"detachEvent")&&e.detachEvent("on"+t,n)}}]).default}));