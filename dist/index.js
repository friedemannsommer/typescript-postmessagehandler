!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.PostMessageHandler=t():e.PostMessageHandler=t()}(self,(function(){return(()=>{"use strict";var e={11:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(59);t.default=function(e,t,n,i){r.default(e,"addEventListener")?e.addEventListener(t,n,i):r.default(e,"attachEvent")&&e.attachEvent("on"+t,n)}},285:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(853);t.default=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return r.default(e)?r.default(Function.prototype.bind)?Function.prototype.bind.apply(e,[t].concat(n)):n.length>0?function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length>0?e.apply(t,n.concat(r)):e.apply(t,n)}:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length>0?e.apply(t,n):e.call(t)}:e}},673:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.prototype.toString.call(e).substring(8).toLowerCase();return t.substring(0,t.length-1)}},853:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(673);t.default=function(e){return"function"===r.default(e)||"function"==typeof e}},593:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var r=n(59);t.default=function(e,t,n){r.default(e,"removeEventListener")?e.removeEventListener(t,n):r.default(e,"detachEvent")&&e.detachEvent("on"+t,n)}},59:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null!==e)try{return t in e}catch(n){return void 0!==e[t]}return!1}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}var r={};return(()=>{var e=r,t=n(11),i=n(285),s=n(673),o=n(853),a=n(593),u=function(){function e(e,t,n){if(this.messageListener=[],this.listenerRegistered=!1,this.isWindow=t.self===t&&t.window===t&&"object"==typeof window.document,this.isWindow&&"string"!==s.default(n))throw new Error("`target` is `window` like which requires an `targetOrigin`, but no `targetOrigin` is set");this.targetOrigin=n,this.secret=e,this.target=t,this.eventCallback=i.default(this.handleMessage,this)}return e.registerListener=function(e){t.default(window,"message",e,!1)},e.removeListener=function(e){a.default(window,"message",e)},e.prototype.subscribe=function(t){var n=this;return this.listenerRegistered||(this.listenerRegistered=!0,e.registerListener(this.eventCallback)),o.default(t)&&this.messageListener.push(t),function(){n.unsubscribe(t)}},e.prototype.unsubscribe=function(t){var n=this.messageListener.indexOf(t);n>-1&&this.messageListener.splice(n,1),this.messageListener.length<=0&&(e.removeListener(this.eventCallback),this.listenerRegistered=!1)},e.prototype.send=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(o.default(this.target.postMessage))try{return this.isWindow?(this.target.postMessage(this.secret+JSON.stringify(e),this.targetOrigin),!0):(this.target.postMessage(this.secret+JSON.stringify(e)),!0)}catch(e){}return!1},e.prototype.checkEventOrigin=function(e,t){return e===this.targetOrigin&&t===this.target},e.prototype.handleMessage=function(e){var t=e.message?"message":"data",n="string"===s.default(e[t])?e[t].slice(0,this.secret.length):"",r="string"===s.default(e[t])?e[t].slice(this.secret.length):"";this.checkEventOrigin(e.origin,e.source)&&n===this.secret&&this.callListener(JSON.parse(r))},e.prototype.callListener=function(e){for(var t=this.messageListener.length,n=-1;++n<t;)this.messageListener[n].apply(void 0,e)},e}();e.default=u})(),r.default})()}));